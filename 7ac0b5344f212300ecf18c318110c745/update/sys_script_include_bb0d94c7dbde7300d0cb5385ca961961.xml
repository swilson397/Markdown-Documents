<?xml version="1.0" encoding="UTF-8"?><record_update table="sys_script_include">
    <sys_script_include action="INSERT_OR_UPDATE">
        <access>package_private</access>
        <active>true</active>
        <api_name>x_58056_md_docs.MarkdownSourceFields</api_name>
        <caller_access/>
        <client_callable>false</client_callable>
        <description/>
        <name>MarkdownSourceFields</name>
        <script><![CDATA[var MarkdownSourceFields = Class.create();
MarkdownSourceFields.prototype = {
  initialize: function() {},

  process: function(tableName) {
    var fields = [];
    var srcTblGR = this.getSourceTables(tableName);
    if (srcTblGR.next()) {
      var srcTblFldGR = this.getSourceTableFields(srcTblGR.getUniqueValue());
      while (srcTblFldGR.next()) {
        fields.push(srcTblFldGR.field.toString());
      }
    }
    return fields;
  },

  /**
   *
   * @param {*} tables
   * @returns {object}
   */
  getScriptFields: function(tables) {
    var fields = {};
    var srcTblGR = this.getSourceTables(tables);
    while (srcTblGR.next()) {
      fields[srcTblGR.table.toString()] = [];
      var tblFields = fields[srcTblGR.table.toString()];
      var srcTblFldGR = this.getSourceTableFields(srcTblGR.getUniqueValue());
      while (srcTblFldGR.next()) {
        tblFields.push(srcTblFldGR.field.toString());
      }
    }
    return fields;
  },

  getSourceTables: function(tables) {
    var srcTblGR = new GlideRecord("x_58056_md_docs_source_tables");
    srcTblGR.addQuery("table", tables);
    srcTblGR.addQuery("active", true);
    srcTblGR.query();
    return srcTblGR;
  },

  getSourceTableFields: function(srcTblID) {
    var srcTblFldGR = new GlideRecord("x_58056_md_docs_source_table_field");
    srcTblFldGR.addQuery("table", srcTblID);
    srcTblFldGR.addQuery("active", true);
    srcTblFldGR.query();
    return srcTblFldGR;
  },

  type: "MarkdownSourceFields"
};
]]></script>
        <sys_class_name>sys_script_include</sys_class_name>
        <sys_created_by>admin</sys_created_by>
        <sys_created_on>2019-07-01 20:57:29</sys_created_on>
        <sys_id>bb0d94c7dbde7300d0cb5385ca961961</sys_id>
        <sys_mod_count>5</sys_mod_count>
        <sys_name>MarkdownSourceFields</sys_name>
        <sys_package display_value="Markdown Documents" source="x_58056_md_docs">7ac0b5344f212300ecf18c318110c745</sys_package>
        <sys_policy>read</sys_policy>
        <sys_scope display_value="Markdown Documents">7ac0b5344f212300ecf18c318110c745</sys_scope>
        <sys_update_name>sys_script_include_bb0d94c7dbde7300d0cb5385ca961961</sys_update_name>
        <sys_updated_by>admin</sys_updated_by>
        <sys_updated_on>2019-08-17 00:24:58</sys_updated_on>
    </sys_script_include>
</record_update>
