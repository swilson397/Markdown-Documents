<?xml version="1.0" encoding="UTF-8"?><record_update sys_domain="global" table="sys_script_client">
    <sys_script_client action="INSERT_OR_UPDATE">
        <active>true</active>
        <applies_extended>false</applies_extended>
        <condition/>
        <description/>
        <field>active</field>
        <global>true</global>
        <isolate_script>true</isolate_script>
        <messages/>
        <name>Add in markdown editor</name>
        <order/>
        <script><![CDATA[function onLoad() {
	//	ScriptLoader.getScripts(['x_58056_md_docs.editormd_min.jsdbx', 'x_58056_md_docs.codemirror.jsdbx', 'x_58056_md_docs.marked.jsdbx', 'x_58056_md_docs.katex_min.jsdbx', 'x_58056_md_docs.addons_min.jsdbx', 'x_58056_md_docs.modes_min.jsdbx'], afterLoad);
	
	// Check that this is a version and not the published article
	var editableFieldsMap = g_scratchpad.versioning.editableFieldsMap;
	if(editableFieldsMap) {
		return;
	}
	
	var scripts = ['x_58056_md_docs.simplemde_min.jsdbx', 'x_58056_md_docs.codemirror.jsdbx', 'x_58056_md_docs.markdown-document.jsdbx', 'x_58056_md_docs.bootstrap.min.jsdbx', 'x_58056_md_docs.jspdf.min.jsdbx'];
	// , 'x_58056_md_docs.png.jsdbx', 'x_58056_md_docs.zlib.jsdbx'];
	
	ScriptLoader.getScripts(scripts, afterLoad);
	function afterLoad() {
		g_form.setDisplay("markdown_text", false);
		//var taName = "x_58056_md_docs_markdown_document.markdown_text";
		// var taName = "markdown-document-editormd";
		// var jqe = jQuery("#" + taName);
		// jqe = jqe[0];
		//var taName = "markdown-document-textarea";
		//taName = taName.replace(/(:|\.|\[|\]|,|=)/g, "\\$1");
		//var jqe = g_form.getControl(taName);
		//SIMPLEMDEINSTANCE = new SimpleMDE({
			//	element: jqe,
			//	spellChecker: false,
			//	forceSync: true,
			//	initialValue: g_form.getValue("markdown_text"),
			//});
			markdownDocument.createSimpleMDE("markdown-document-textarea", g_form.getValue("markdown_text"));
			/*
			testEditor = editormd(taName, {
				width: "90%",
				height: 740,
				path: "",
				autoLoadModules: false,
				theme: "dark",
				previewTheme: "dark",
				editorTheme: "pastel-on-dark",
				//markdown: md,
				//codeFold: true,
				//syncScrolling : false,
				saveHTMLToTextarea: true, // Textarea
				searchReplace: true,
				//watch : false,                //
				htmlDecode: "style,script,iframe|on*", //
				//toolbar  : false,             //
				//previewCodeHighlight : false, //
				//emoji: true,
				//taskList: true,
				tocm: true, // Using [TOCM]
				tex: false, //
				//flowChart: true, //
				//sequenceDiagram: true, //
				//dialogLockScreen : false,   // true
				//dialogShowMask : false,     // true
				//dialogDraggable : false,    // true
				//dialogMaskOpacity : 0.4,    // 0.1
				//dialogMaskBgColor : "#000", // #fff
				imageUpload: true,
				imageFormats: ["jpg", "jpeg", "gif", "png", "bmp", "webp"],
				imageUploadURL: "./php/upload.php",
				onload: function() {
					console.log("onload", this);
					//this.fullscreen();
					//this.unwatch();
					//this.watch().fullscreen();
					
					//this.setMarkdown("#PHP");
					//this.width("100%");
					//this.height(480);
					//this.resize("100%", 640);
				}
			});
 			*/
		}
	}]]></script>
        <sys_class_name>sys_script_client</sys_class_name>
        <sys_created_by>admin</sys_created_by>
        <sys_created_on>2018-11-01 00:49:15</sys_created_on>
        <sys_domain>global</sys_domain>
        <sys_domain_path>/</sys_domain_path>
        <sys_id>dcc6793c4f212300ecf18c318110c7f8</sys_id>
        <sys_mod_count>46</sys_mod_count>
        <sys_name>Add in markdown editor</sys_name>
        <sys_overrides/>
        <sys_package display_value="Markdown Documents" source="x_58056_md_docs">7ac0b5344f212300ecf18c318110c745</sys_package>
        <sys_policy/>
        <sys_scope display_value="Markdown Documents">7ac0b5344f212300ecf18c318110c745</sys_scope>
        <sys_update_name>sys_script_client_dcc6793c4f212300ecf18c318110c7f8</sys_update_name>
        <sys_updated_by>admin</sys_updated_by>
        <sys_updated_on>2019-05-01 22:58:20</sys_updated_on>
        <table>x_58056_md_docs_markdown_document</table>
        <type>onLoad</type>
        <ui_type>0</ui_type>
        <view/>
    </sys_script_client>
</record_update>
