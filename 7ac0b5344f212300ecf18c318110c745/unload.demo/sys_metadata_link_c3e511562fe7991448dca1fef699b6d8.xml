<?xml version="1.0" encoding="UTF-8"?><record_update table="sys_metadata_link">
    <sys_metadata_link action="INSERT_OR_UPDATE">
        <directory>unload.demo</directory>
        <documentkey>bad09354dbb17300d0cb5385ca96196b</documentkey>
        <payload><![CDATA[<?xml version="1.0" encoding="UTF-8"?><record_update table="x_58056_md_docs_markdown_source">
    <x_58056_md_docs_markdown_source action="INSERT_OR_UPDATE">
        <abstract_syntax_tree>{"type":"Program","body":[{"type":"VariableDeclaration","declarations":[{"type":"VariableDeclarator","id":{"type":"Identifier","name":"GroupAttributesAjax"},"init":{"type":"CallExpression","callee":{"type":"MemberExpression","computed":false,"object":{"type":"Identifier","name":"Class"},"property":{"type":"Identifier","name":"create"}},"arguments":[]}}],"kind":"var"},{"type":"ExpressionStatement","expression":{"type":"AssignmentExpression","operator":"=","left":{"type":"MemberExpression","computed":false,"object":{"type":"Identifier","name":"GroupAttributesAjax"},"property":{"type":"Identifier","name":"prototype"}},"right":{"type":"CallExpression","callee":{"type":"MemberExpression","computed":false,"object":{"type":"Identifier","name":"Object"},"property":{"type":"Identifier","name":"extendsObject"}},"arguments":[{"type":"Identifier","name":"AbstractAjaxProcessor"},{"type":"ObjectExpression","properties":[{"type":"Property","key":{"type":"Identifier","name":"getAllGroupAttributes"},"computed":false,"value":{"type":"FunctionExpression","id":null,"params":[],"body":{"type":"BlockStatement","body":[{"type":"VariableDeclaration","declarations":[{"type":"VariableDeclarator","id":{"type":"Identifier","name":"groupDetails"},"init":{"type":"ObjectExpression","properties":[{"type":"Property","key":{"type":"Identifier","name":"name"},"computed":false,"value":{"type":"Literal","value":"","raw":"\"\""},"kind":"init","method":false,"shorthand":false},{"type":"Property","key":{"type":"Identifier","name":"manager"},"computed":false,"value":{"type":"Literal","value":null,"raw":"null"},"kind":"init","method":false,"shorthand":false},{"type":"Property","key":{"type":"Identifier","name":"alternate_managers"},"computed":false,"value":{"type":"ArrayExpression","elements":[]},"kind":"init","method":false,"shorthand":false},{"type":"Property","key":{"type":"Identifier","name":"email"},"computed":false,"value":{"type":"Literal","value":"","raw":"\"\""},"kind":"init","method":false,"shorthand":false},{"type":"Property","key":{"type":"Identifier","name":"description"},"computed":false,"value":{"type":"Literal","value":"","raw":"\"\""},"kind":"init","method":false,"shorthand":false},{"type":"Property","key":{"type":"Identifier","name":"u_primary_use"},"computed":false,"value":{"type":"Literal","value":null,"raw":"null"},"kind":"init","method":false,"shorthand":false},{"type":"Property","key":{"type":"Identifier","name":"parent"},"computed":false,"value":{"type":"Literal","value":null,"raw":"null"},"kind":"init","method":false,"shorthand":false},{"type":"Property","key":{"type":"Identifier","name":"business_service"},"computed":false,"value":{"type":"Literal","value":null,"raw":"null"},"kind":"init","method":false,"shorthand":false},{"type":"Property","key":{"type":"Identifier","name":"service_offering"},"computed":false,"value":{"type":"Literal","value":null,"raw":"null"},"kind":"init","method":false,"shorthand":false},{"type":"Property","key":{"type":"Identifier","name":"vendor"},"computed":false,"value":{"type":"Literal","value":null,"raw":"null"},"kind":"init","method":false,"shorthand":false},{"type":"Property","key":{"type":"Identifier","name":"active"},"computed":false,"value":{"type":"Literal","value":"","raw":"\"\""},"kind":"init","method":false,"shorthand":false},{"type":"Property","key":{"type":"Identifier","name":"members"},"computed":false,"value":{"type":"ArrayExpression","elements":[]},"kind":"init","method":false,"shorthand":false},{"type":"Property","key":{"type":"Identifier","name":"roles"},"computed":false,"value":{"type":"ArrayExpression","elements":[]},"kind":"init","method":false,"shorthand":false},{"type":"Property","key":{"type":"Identifier","name":"types"},"computed":false,"value":{"type":"ArrayExpression","elements":[]},"kind":"init","method":false,"shorthand":false},{"type":"Property","key":{"type":"Identifier","name":"countries"},"computed":false,"value":{"type":"ArrayExpression","elements":[]},"kind":"init","method":false,"shorthand":false}]}}],"kind":"var"},{"type":"VariableDeclaration","declarations":[{"type":"VariableDeclarator","id":{"type":"Identifier","name":"utils"},"init":{"type":"NewExpression","callee":{"type":"Identifier","name":"GroupUtils"},"arguments":[]}}],"kind":"var"},{"type":"VariableDeclaration","declarations":[{"type":"VariableDeclarator","id":{"type":"Identifier","name":"grpID"},"init":{"type":"CallExpression","callee":{"type":"MemberExpression","computed":false,"object":{"type":"ThisExpression"},"property":{"type":"Identifier","name":"getParameter"}},"arguments":[{"type":"Literal","value":"sysparm_group_id","raw":"\"sysparm_group_id\""}]}}],"kind":"var"},{"type":"VariableDeclaration","declarations":[{"type":"VariableDeclarator","id":{"type":"Identifier","name":"grpGR"},"init":{"type":"NewExpression","callee":{"type":"Identifier","name":"GlideRecord"},"arguments":[{"type":"Literal","value":"sys_user_group","raw":"\"sys_user_group\""}]}}],"kind":"var"},{"type":"IfStatement","test":{"type":"CallExpression","callee":{"type":"MemberExpression","computed":false,"object":{"type":"Identifier","name":"grpGR"},"property":{"type":"Identifier","name":"get"}},"arguments":[{"type":"Identifier","name":"grpID"}]},"consequent":{"type":"BlockStatement","body":[{"type":"ExpressionStatement","expression":{"type":"AssignmentExpression","operator":"=","left":{"type":"MemberExpression","computed":false,"object":{"type":"Identifier","name":"groupDetails"},"property":{"type":"Identifier","name":"name"}},"right":{"type":"CallExpression","callee":{"type":"MemberExpression","computed":false,"object":{"type":"MemberExpression","computed":false,"object":{"type":"Identifier","name":"grpGR"},"property":{"type":"Identifier","name":"name"}},"property":{"type":"Identifier","name":"toString"}},"arguments":[]}}},{"type":"ExpressionStatement","expression":{"type":"AssignmentExpression","operator":"=","left":{"type":"MemberExpression","computed":false,"object":{"type":"Identifier","name":"groupDetails"},"property":{"type":"Identifier","name":"email"}},"right":{"type":"CallExpression","callee":{"type":"MemberExpression","computed":false,"object":{"type":"MemberExpression","computed":false,"object":{"type":"Identifier","name":"grpGR"},"property":{"type":"Identifier","name":"email"}},"property":{"type":"Identifier","name":"toString"}},"arguments":[]}}},{"type":"ExpressionStatement","expression":{"type":"AssignmentExpression","operator":"=","left":{"type":"MemberExpression","computed":false,"object":{"type":"Identifier","name":"groupDetails"},"property":{"type":"Identifier","name":"description"}},"right":{"type":"CallExpression","callee":{"type":"MemberExpression","computed":false,"object":{"type":"MemberExpression","computed":false,"object":{"type":"Identifier","name":"grpGR"},"property":{"type":"Identifier","name":"description"}},"property":{"type":"Identifier","name":"toString"}},"arguments":[]}}},{"type":"ExpressionStatement","expression":{"type":"AssignmentExpression","operator":"=","left":{"type":"MemberExpression","computed":false,"object":{"type":"Identifier","name":"groupDetails"},"property":{"type":"Identifier","name":"manager"}},"right":{"type":"ConditionalExpression","test":{"type":"UnaryExpression","operator":"!","argument":{"type":"CallExpression","callee":{"type":"MemberExpression","computed":false,"object":{"type":"MemberExpression","computed":false,"object":{"type":"Identifier","name":"grpGR"},"property":{"type":"Identifier","name":"manager"}},"property":{"type":"Identifier","name":"nil"}},"arguments":[]},"prefix":true},"consequent":{"type":"ObjectExpression","properties":[{"type":"Property","key":{"type":"Identifier","name":"sys_id"},"computed":false,"value":{"type":"CallExpression","callee":{"type":"MemberExpression","computed":false,"object":{"type":"MemberExpression","computed":false,"object":{"type":"Identifier","name":"grpGR"},"property":{"type":"Identifier","name":"manager"}},"property":{"type":"Identifier","name":"toString"}},"arguments":[]},"kind":"init","method":false,"shorthand":false},{"type":"Property","key":{"type":"Identifier","name":"display"},"computed":false,"value":{"type":"CallExpression","callee":{"type":"MemberExpression","computed":false,"object":{"type":"MemberExpression","computed":false,"object":{"type":"Identifier","name":"grpGR"},"property":{"type":"Identifier","name":"manager"}},"property":{"type":"Identifier","name":"getDisplayValue"}},"arguments":[]},"kind":"init","method":false,"shorthand":false}]},"alternate":{"type":"Literal","value":null,"raw":"null"}}}},{"type":"ExpressionStatement","expression":{"type":"AssignmentExpression","operator":"=","left":{"type":"MemberExpression","computed":false,"object":{"type":"Identifier","name":"groupDetails"},"property":{"type":"Identifier","name":"u_primary_use"}},"right":{"type":"ConditionalExpression","test":{"type":"UnaryExpression","operator":"!","argument":{"type":"CallExpression","callee":{"type":"MemberExpression","computed":false,"object":{"type":"MemberExpression","computed":false,"object":{"type":"Identifier","name":"grpGR"},"property":{"type":"Identifier","name":"u_primary_use"}},"property":{"type":"Identifier","name":"nil"}},"arguments":[]},"prefix":true},"consequent":{"type":"ObjectExpression","properties":[{"type":"Property","key":{"type":"Identifier","name":"sys_id"},"computed":false,"value":{"type":"CallExpression","callee":{"type":"MemberExpression","computed":false,"object":{"type":"MemberExpression","computed":false,"object":{"type":"Identifier","name":"grpGR"},"property":{"type":"Identifier","name":"u_primary_use"}},"property":{"type":"Identifier","name":"toString"}},"arguments":[]},"kind":"init","method":false,"shorthand":false},{"type":"Property","key":{"type":"Identifier","name":"display"},"computed":false,"value":{"type":"CallExpression","callee":{"type":"MemberExpression","computed":false,"object":{"type":"MemberExpression","computed":false,"object":{"type":"Identifier","name":"grpGR"},"property":{"type":"Identifier","name":"u_primary_use"}},"property":{"type":"Identifier","name":"getDisplayValue"}},"arguments":[]},"kind":"init","method":false,"shorthand":false}]},"alternate":{"type":"Literal","value":null,"raw":"null"}}}},{"type":"ExpressionStatement","expression":{"type":"AssignmentExpression","operator":"=","left":{"type":"MemberExpression","computed":false,"object":{"type":"Identifier","name":"groupDetails"},"property":{"type":"Identifier","name":"parent"}},"right":{"type":"ConditionalExpression","test":{"type":"UnaryExpression","operator":"!","argument":{"type":"CallExpression","callee":{"type":"MemberExpression","computed":false,"object":{"type":"MemberExpression","computed":false,"object":{"type":"Identifier","name":"grpGR"},"property":{"type":"Identifier","name":"parent"}},"property":{"type":"Identifier","name":"nil"}},"arguments":[]},"prefix":true},"consequent":{"type":"ObjectExpression","properties":[{"type":"Property","key":{"type":"Identifier","name":"sys_id"},"computed":false,"value":{"type":"CallExpression","callee":{"type":"MemberExpression","computed":false,"object":{"type":"MemberExpression","computed":false,"object":{"type":"Identifier","name":"grpGR"},"property":{"type":"Identifier","name":"parent"}},"property":{"type":"Identifier","name":"toString"}},"arguments":[]},"kind":"init","method":false,"shorthand":false},{"type":"Property","key":{"type":"Identifier","name":"display"},"computed":false,"value":{"type":"CallExpression","callee":{"type":"MemberExpression","computed":false,"object":{"type":"MemberExpression","computed":false,"object":{"type":"Identifier","name":"grpGR"},"property":{"type":"Identifier","name":"parent"}},"property":{"type":"Identifier","name":"getDisplayValue"}},"arguments":[]},"kind":"init","method":false,"shorthand":false}]},"alternate":{"type":"Literal","value":null,"raw":"null"}}}},{"type":"ExpressionStatement","expression":{"type":"AssignmentExpression","operator":"=","left":{"type":"MemberExpression","computed":false,"object":{"type":"Identifier","name":"groupDetails"},"property":{"type":"Identifier","name":"business_service"}},"right":{"type":"ConditionalExpression","test":{"type":"UnaryExpression","operator":"!","argument":{"type":"CallExpression","callee":{"type":"MemberExpression","computed":false,"object":{"type":"MemberExpression","computed":false,"object":{"type":"Identifier","name":"grpGR"},"property":{"type":"Identifier","name":"u_business_service"}},"property":{"type":"Identifier","name":"nil"}},"arguments":[]},"prefix":true},"consequent":{"type":"ObjectExpression","properties":[{"type":"Property","key":{"type":"Identifier","name":"sys_id"},"computed":false,"value":{"type":"CallExpression","callee":{"type":"MemberExpression","computed":false,"object":{"type":"MemberExpression","computed":false,"object":{"type":"Identifier","name":"grpGR"},"property":{"type":"Identifier","name":"u_business_service"}},"property":{"type":"Identifier","name":"toString"}},"arguments":[]},"kind":"init","method":false,"shorthand":false},{"type":"Property","key":{"type":"Identifier","name":"display"},"computed":false,"value":{"type":"CallExpression","callee":{"type":"MemberExpression","computed":false,"object":{"type":"MemberExpression","computed":false,"object":{"type":"Identifier","name":"grpGR"},"property":{"type":"Identifier","name":"u_business_service"}},"property":{"type":"Identifier","name":"getDisplayValue"}},"arguments":[]},"kind":"init","method":false,"shorthand":false}]},"alternate":{"type":"Literal","value":null,"raw":"null"}}}},{"type":"ExpressionStatement","expression":{"type":"AssignmentExpression","operator":"=","left":{"type":"MemberExpression","computed":false,"object":{"type":"Identifier","name":"groupDetails"},"property":{"type":"Identifier","name":"service_offering"}},"right":{"type":"ConditionalExpression","test":{"type":"UnaryExpression","operator":"!","argument":{"type":"CallExpression","callee":{"type":"MemberExpression","computed":false,"object":{"type":"MemberExpression","computed":false,"object":{"type":"Identifier","name":"grpGR"},"property":{"type":"Identifier","name":"u_service_offering"}},"property":{"type":"Identifier","name":"nil"}},"arguments":[]},"prefix":true},"consequent":{"type":"ObjectExpression","properties":[{"type":"Property","key":{"type":"Identifier","name":"sys_id"},"computed":false,"value":{"type":"CallExpression","callee":{"type":"MemberExpression","computed":false,"object":{"type":"MemberExpression","computed":false,"object":{"type":"Identifier","name":"grpGR"},"property":{"type":"Identifier","name":"u_service_offering"}},"property":{"type":"Identifier","name":"toString"}},"arguments":[]},"kind":"init","method":false,"shorthand":false},{"type":"Property","key":{"type":"Identifier","name":"display"},"computed":false,"value":{"type":"CallExpression","callee":{"type":"MemberExpression","computed":false,"object":{"type":"MemberExpression","computed":false,"object":{"type":"Identifier","name":"grpGR"},"property":{"type":"Identifier","name":"u_service_offering"}},"property":{"type":"Identifier","name":"getDisplayValue"}},"arguments":[]},"kind":"init","method":false,"shorthand":false}]},"alternate":{"type":"Literal","value":null,"raw":"null"}}}},{"type":"ExpressionStatement","expression":{"type":"AssignmentExpression","operator":"=","left":{"type":"MemberExpression","computed":false,"object":{"type":"Identifier","name":"groupDetails"},"property":{"type":"Identifier","name":"vendor"}},"right":{"type":"ConditionalExpression","test":{"type":"UnaryExpression","operator":"!","argument":{"type":"CallExpression","callee":{"type":"MemberExpression","computed":false,"object":{"type":"MemberExpression","computed":false,"object":{"type":"Identifier","name":"grpGR"},"property":{"type":"Identifier","name":"u_vendor"}},"property":{"type":"Identifier","name":"nil"}},"arguments":[]},"prefix":true},"consequent":{"type":"ObjectExpression","properties":[{"type":"Property","key":{"type":"Identifier","name":"sys_id"},"computed":false,"value":{"type":"CallExpression","callee":{"type":"MemberExpression","computed":false,"object":{"type":"MemberExpression","computed":false,"object":{"type":"Identifier","name":"grpGR"},"property":{"type":"Identifier","name":"u_vendor"}},"property":{"type":"Identifier","name":"toString"}},"arguments":[]},"kind":"init","method":false,"shorthand":false},{"type":"Property","key":{"type":"Identifier","name":"display"},"computed":false,"value":{"type":"CallExpression","callee":{"type":"MemberExpression","computed":false,"object":{"type":"MemberExpression","computed":false,"object":{"type":"Identifier","name":"grpGR"},"property":{"type":"Identifier","name":"u_vendor"}},"property":{"type":"Identifier","name":"getDisplayValue"}},"arguments":[]},"kind":"init","method":false,"shorthand":false}]},"alternate":{"type":"Literal","value":null,"raw":"null"}}}},{"type":"ExpressionStatement","expression":{"type":"AssignmentExpression","operator":"=","left":{"type":"MemberExpression","computed":false,"object":{"type":"Identifier","name":"groupDetails"},"property":{"type":"Identifier","name":"active"}},"right":{"type":"ConditionalExpression","test":{"type":"MemberExpression","computed":false,"object":{"type":"Identifier","name":"grpGR"},"property":{"type":"Identifier","name":"active"}},"consequent":{"type":"Literal","value":"Yes","raw":"\"Yes\""},"alternate":{"type":"Literal","value":"No","raw":"\"No\""}}}},{"type":"ExpressionStatement","expression":{"type":"AssignmentExpression","operator":"=","left":{"type":"MemberExpression","computed":false,"object":{"type":"Identifier","name":"groupDetails"},"property":{"type":"Identifier","name":"members"}},"right":{"type":"CallExpression","callee":{"type":"MemberExpression","computed":false,"object":{"type":"Identifier","name":"utils"},"property":{"type":"Identifier","name":"getGroupMembers"}},"arguments":[{"type":"Identifier","name":"grpID"}]}}},{"type":"ExpressionStatement","expression":{"type":"AssignmentExpression","operator":"=","left":{"type":"MemberExpression","computed":false,"object":{"type":"Identifier","name":"groupDetails"},"property":{"type":"Identifier","name":"roles"}},"right":{"type":"CallExpression","callee":{"type":"MemberExpression","computed":false,"object":{"type":"Identifier","name":"utils"},"property":{"type":"Identifier","name":"getGroupRoles"}},"arguments":[{"type":"Identifier","name":"grpID"}]}}},{"type":"ExpressionStatement","expression":{"type":"AssignmentExpression","operator":"=","left":{"type":"MemberExpression","computed":false,"object":{"type":"Identifier","name":"groupDetails"},"property":{"type":"Identifier","name":"countries"}},"right":{"type":"CallExpression","callee":{"type":"MemberExpression","computed":false,"object":{"type":"Identifier","name":"utils"},"property":{"type":"Identifier","name":"getGroupCountries"}},"arguments":[{"type":"Identifier","name":"grpID"}]}}},{"type":"ExpressionStatement","expression":{"type":"AssignmentExpression","operator":"=","left":{"type":"MemberExpression","computed":false,"object":{"type":"Identifier","name":"groupDetails"},"property":{"type":"Identifier","name":"types"}},"right":{"type":"CallExpression","callee":{"type":"MemberExpression","computed":false,"object":{"type":"Identifier","name":"utils"},"property":{"type":"Identifier","name":"getGroupTypes"}},"arguments":[{"type":"CallExpression","callee":{"type":"MemberExpression","computed":false,"object":{"type":"MemberExpression","computed":false,"object":{"type":"Identifier","name":"grpGR"},"property":{"type":"Identifier","name":"type"}},"property":{"type":"Identifier","name":"toString"}},"arguments":[]}]}}},{"type":"ExpressionStatement","expression":{"type":"AssignmentExpression","operator":"=","left":{"type":"MemberExpression","computed":false,"object":{"type":"Identifier","name":"groupDetails"},"property":{"type":"Identifier","name":"alternate_managers"}},"right":{"type":"CallExpression","callee":{"type":"MemberExpression","computed":false,"object":{"type":"Identifier","name":"utils"},"property":{"type":"Identifier","name":"getUserDetails"}},"arguments":[{"type":"CallExpression","callee":{"type":"MemberExpression","computed":false,"object":{"type":"MemberExpression","computed":false,"object":{"type":"Identifier","name":"grpGR"},"property":{"type":"Identifier","name":"u_alternate_managers"}},"property":{"type":"Identifier","name":"toString"}},"arguments":[]}]}}}]},"alternate":null},{"type":"ReturnStatement","argument":{"type":"CallExpression","callee":{"type":"MemberExpression","computed":false,"object":{"type":"Identifier","name":"JSON"},"property":{"type":"Identifier","name":"stringify"}},"arguments":[{"type":"Identifier","name":"groupDetails"}]}}]},"generator":false,"expression":false,"async":false},"kind":"init","method":false,"shorthand":false},{"type":"Property","key":{"type":"Identifier","name":"userManagesGroups"},"computed":false,"value":{"type":"FunctionExpression","id":null,"params":[],"body":{"type":"BlockStatement","body":[{"type":"VariableDeclaration","declarations":[{"type":"VariableDeclarator","id":{"type":"Identifier","name":"managerID"},"init":{"type":"CallExpression","callee":{"type":"MemberExpression","computed":false,"object":{"type":"ThisExpression"},"property":{"type":"Identifier","name":"getParameter"}},"arguments":[{"type":"Literal","value":"sysparm_requested_by","raw":"\"sysparm_requested_by\""}]}}],"kind":"var"},{"type":"VariableDeclaration","declarations":[{"type":"VariableDeclarator","id":{"type":"Identifier","name":"managesGroups"},"init":{"type":"CallExpression","callee":{"type":"MemberExpression","computed":false,"object":{"type":"NewExpression","callee":{"type":"Identifier","name":"GroupUtils"},"arguments":[]},"property":{"type":"Identifier","name":"userManagesGroups"}},"arguments":[{"type":"Identifier","name":"managerID"}]}}],"kind":"var"},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","computed":false,"object":{"type":"Identifier","name":"gs"},"property":{"type":"Identifier","name":"info"}},"arguments":[{"type":"BinaryExpression","operator":"+","left":{"type":"BinaryExpression","operator":"+","left":{"type":"BinaryExpression","operator":"+","left":{"type":"Literal","value":"Manages groups=","raw":"\"Manages groups=\""},"right":{"type":"Identifier","name":"managesGroups"}},"right":{"type":"Literal","value":" id=","raw":"\" id=\""}},"right":{"type":"Identifier","name":"managerID"}}]}},{"type":"ReturnStatement","argument":{"type":"ConditionalExpression","test":{"type":"Identifier","name":"managesGroups"},"consequent":{"type":"Literal","value":"true","raw":"\"true\""},"alternate":{"type":"Literal","value":"false","raw":"\"false\""}}}]},"generator":false,"expression":false,"async":false},"kind":"init","method":false,"shorthand":false},{"type":"Property","key":{"type":"Identifier","name":"groupValidForUser"},"computed":false,"value":{"type":"FunctionExpression","id":null,"params":[],"body":{"type":"BlockStatement","body":[{"type":"VariableDeclaration","declarations":[{"type":"VariableDeclarator","id":{"type":"Identifier","name":"groupID"},"init":{"type":"CallExpression","callee":{"type":"MemberExpression","computed":false,"object":{"type":"ThisExpression"},"property":{"type":"Identifier","name":"getParameter"}},"arguments":[{"type":"Literal","value":"sysparm_group_id","raw":"\"sysparm_group_id\""}]}}],"kind":"var"},{"type":"VariableDeclaration","declarations":[{"type":"VariableDeclarator","id":{"type":"Identifier","name":"managerID"},"init":{"type":"CallExpression","callee":{"type":"MemberExpression","computed":false,"object":{"type":"ThisExpression"},"property":{"type":"Identifier","name":"getParameter"}},"arguments":[{"type":"Literal","value":"sysparm_requested_by","raw":"\"sysparm_requested_by\""}]}}],"kind":"var"},{"type":"VariableDeclaration","declarations":[{"type":"VariableDeclarator","id":{"type":"Identifier","name":"requestType"},"init":{"type":"CallExpression","callee":{"type":"MemberExpression","computed":false,"object":{"type":"ThisExpression"},"property":{"type":"Identifier","name":"getParameter"}},"arguments":[{"type":"Literal","value":"sysparm_request_type","raw":"\"sysparm_request_type\""}]}}],"kind":"var"},{"type":"VariableDeclaration","declarations":[{"type":"VariableDeclarator","id":{"type":"Identifier","name":"utils"},"init":{"type":"NewExpression","callee":{"type":"Identifier","name":"GroupUtils"},"arguments":[]}}],"kind":"var"},{"type":"VariableDeclaration","declarations":[{"type":"VariableDeclarator","id":{"type":"Identifier","name":"groups"},"init":null}],"kind":"var"},{"type":"IfStatement","test":{"type":"BinaryExpression","operator":"==","left":{"type":"Identifier","name":"requestType"},"right":{"type":"Literal","value":"remove_member","raw":"\"remove_member\""}},"consequent":{"type":"BlockStatement","body":[{"type":"ExpressionStatement","expression":{"type":"AssignmentExpression","operator":"=","left":{"type":"Identifier","name":"groups"},"right":{"type":"CallExpression","callee":{"type":"MemberExpression","computed":false,"object":{"type":"Identifier","name":"utils"},"property":{"type":"Identifier","name":"getUserGroups"}},"arguments":[{"type":"Identifier","name":"managerID"}]}}},{"type":"VariableDeclaration","declarations":[{"type":"VariableDeclarator","id":{"type":"Identifier","name":"userIsInGroup"},"init":{"type":"CallExpression","callee":{"type":"MemberExpression","computed":false,"object":{"type":"Identifier","name":"groups"},"property":{"type":"Identifier","name":"some"}},"arguments":[{"type":"FunctionExpression","id":null,"params":[{"type":"Identifier","name":"group"}],"body":{"type":"BlockStatement","body":[{"type":"ReturnStatement","argument":{"type":"BinaryExpression","operator":"==","left":{"type":"Identifier","name":"groupID"},"right":{"type":"MemberExpression","computed":false,"object":{"type":"Identifier","name":"group"},"property":{"type":"Identifier","name":"sys_id"}}}}]},"generator":false,"expression":false,"async":false},{"type":"ThisExpression"}]}}],"kind":"var"},{"type":"ReturnStatement","argument":{"type":"ConditionalExpression","test":{"type":"Identifier","name":"userIsInGroup"},"consequent":{"type":"Literal","value":"true","raw":"\"true\""},"alternate":{"type":"Literal","value":"false","raw":"\"false\""}}}]},"alternate":null},{"type":"IfStatement","test":{"type":"LogicalExpression","operator":"&amp;&amp;","left":{"type":"BinaryExpression","operator":"==","left":{"type":"Identifier","name":"requestType"},"right":{"type":"Literal","value":"add_member","raw":"\"add_member\""}},"right":{"type":"CallExpression","callee":{"type":"MemberExpression","computed":false,"object":{"type":"Identifier","name":"utils"},"property":{"type":"Identifier","name":"userIsInGroup"}},"arguments":[{"type":"Identifier","name":"managerID"},{"type":"Identifier","name":"groupID"}]}},"consequent":{"type":"BlockStatement","body":[{"type":"ReturnStatement","argument":{"type":"Literal","value":"false","raw":"\"false\""}}]},"alternate":null},{"type":"VariableDeclaration","declarations":[{"type":"VariableDeclarator","id":{"type":"Identifier","name":"grpGR"},"init":{"type":"NewExpression","callee":{"type":"Identifier","name":"GlideRecord"},"arguments":[{"type":"Literal","value":"sys_user_group","raw":"\"sys_user_group\""}]}}],"kind":"var"},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","computed":false,"object":{"type":"Identifier","name":"grpGR"},"property":{"type":"Identifier","name":"addQuery"}},"arguments":[{"type":"Literal","value":"sys_id","raw":"\"sys_id\""},{"type":"Identifier","name":"groupID"}]}},{"type":"IfStatement","test":{"type":"BinaryExpression","operator":"==","left":{"type":"Identifier","name":"requestType"},"right":{"type":"Literal","value":"activate","raw":"\"activate\""}},"consequent":{"type":"BlockStatement","body":[{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","computed":false,"object":{"type":"Identifier","name":"grpGR"},"property":{"type":"Identifier","name":"addQuery"}},"arguments":[{"type":"Literal","value":"active","raw":"\"active\""},{"type":"Literal","value":false,"raw":"false"}]}}]},"alternate":{"type":"BlockStatement","body":[{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","computed":false,"object":{"type":"Identifier","name":"grpGR"},"property":{"type":"Identifier","name":"addActiveQuery"}},"arguments":[]}}]}},{"type":"IfStatement","test":{"type":"BinaryExpression","operator":"!=","left":{"type":"Identifier","name":"requestType"},"right":{"type":"Literal","value":"add_member","raw":"\"add_member\""}},"consequent":{"type":"BlockStatement","body":[{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","computed":false,"object":{"type":"CallExpression","callee":{"type":"MemberExpression","computed":false,"object":{"type":"Identifier","name":"grpGR"},"property":{"type":"Identifier","name":"addQuery"}},"arguments":[{"type":"Literal","value":"manager","raw":"\"manager\""},{"type":"Identifier","name":"managerID"}]},"property":{"type":"Identifier","name":"addOrCondition"}},"arguments":[{"type":"Literal","value":"u_alternate_managers","raw":"\"u_alternate_managers\""},{"type":"Literal","value":"CONTAINS","raw":"\"CONTAINS\""},{"type":"Identifier","name":"managerID"}]}}]},"alternate":null},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","computed":false,"object":{"type":"Identifier","name":"grpGR"},"property":{"type":"Identifier","name":"query"}},"arguments":[]}},{"type":"ReturnStatement","argument":{"type":"ConditionalExpression","test":{"type":"CallExpression","callee":{"type":"MemberExpression","computed":false,"object":{"type":"Identifier","name":"grpGR"},"property":{"type":"Identifier","name":"hasNext"}},"arguments":[]},"consequent":{"type":"Literal","value":"true","raw":"\"true\""},"alternate":{"type":"Literal","value":"false","raw":"\"false\""}}}]},"generator":false,"expression":false,"async":false},"kind":"init","method":false,"shorthand":false},{"type":"Property","key":{"type":"Identifier","name":"editGroupChanges"},"computed":false,"value":{"type":"FunctionExpression","id":null,"params":[],"body":{"type":"BlockStatement","body":[{"type":"VariableDeclaration","declarations":[{"type":"VariableDeclarator","id":{"type":"Identifier","name":"roles"},"init":{"type":"CallExpression","callee":{"type":"MemberExpression","computed":false,"object":{"type":"CallExpression","callee":{"type":"MemberExpression","computed":false,"object":{"type":"ThisExpression"},"property":{"type":"Identifier","name":"getParameter"}},"arguments":[{"type":"Literal","value":"sysparm_group_roles","raw":"\"sysparm_group_roles\""}]},"property":{"type":"Identifier","name":"split"}},"arguments":[{"type":"Literal","value":",","raw":"\",\""}]}}],"kind":"var"},{"type":"ExpressionStatement","expression":{"type":"AssignmentExpression","operator":"=","left":{"type":"Identifier","name":"roles"},"right":{"type":"CallExpression","callee":{"type":"MemberExpression","computed":false,"object":{"type":"Identifier","name":"roles"},"property":{"type":"Identifier","name":"filter"}},"arguments":[{"type":"FunctionExpression","id":null,"params":[{"type":"Identifier","name":"role"}],"body":{"type":"BlockStatement","body":[{"type":"ReturnStatement","argument":{"type":"UnaryExpression","operator":"!","argument":{"type":"CallExpression","callee":{"type":"MemberExpression","computed":false,"object":{"type":"Identifier","name":"gs"},"property":{"type":"Identifier","name":"nil"}},"arguments":[{"type":"CallExpression","callee":{"type":"MemberExpression","computed":false,"object":{"type":"Identifier","name":"role"},"property":{"type":"Identifier","name":"trim"}},"arguments":[]}]},"prefix":true}}]},"generator":false,"expression":false,"async":false},{"type":"ThisExpression"}]}}},{"type":"VariableDeclaration","declarations":[{"type":"VariableDeclarator","id":{"type":"Identifier","name":"members"},"init":{"type":"CallExpression","callee":{"type":"MemberExpression","computed":false,"object":{"type":"CallExpression","callee":{"type":"MemberExpression","computed":false,"object":{"type":"ThisExpression"},"property":{"type":"Identifier","name":"getParameter"}},"arguments":[{"type":"Literal","value":"sysparm_group_members","raw":"\"sysparm_group_members\""}]},"property":{"type":"Identifier","name":"split"}},"arguments":[{"type":"Literal","value":",","raw":"\",\""}]}}],"kind":"var"},{"type":"ExpressionStatement","expression":{"type":"AssignmentExpression","operator":"=","left":{"type":"Identifier","name":"members"},"right":{"type":"CallExpression","callee":{"type":"MemberExpression","computed":false,"object":{"type":"Identifier","name":"members"},"property":{"type":"Identifier","name":"filter"}},"arguments":[{"type":"FunctionExpression","id":null,"params":[{"type":"Identifier","name":"member"}],"body":{"type":"BlockStatement","body":[{"type":"ReturnStatement","argument":{"type":"UnaryExpression","operator":"!","argument":{"type":"CallExpression","callee":{"type":"MemberExpression","computed":false,"object":{"type":"Identifier","name":"gs"},"property":{"type":"Identifier","name":"nil"}},"arguments":[{"type":"CallExpression","callee":{"type":"MemberExpression","computed":false,"object":{"type":"Identifier","name":"member"},"property":{"type":"Identifier","name":"trim"}},"arguments":[]}]},"prefix":true}}]},"generator":false,"expression":false,"async":false},{"type":"ThisExpression"}]}}},{"type":"ReturnStatement","argument":{"type":"CallExpression","callee":{"type":"MemberExpression","computed":false,"object":{"type":"Identifier","name":"JSON"},"property":{"type":"Identifier","name":"stringify"}},"arguments":[{"type":"ObjectExpression","properties":[{"type":"Property","key":{"type":"Identifier","name":"nameExists"},"computed":false,"value":{"type":"CallExpression","callee":{"type":"MemberExpression","computed":false,"object":{"type":"ThisExpression"},"property":{"type":"Identifier","name":"groupNameExists"}},"arguments":[]},"kind":"init","method":false,"shorthand":false},{"type":"Property","key":{"type":"Identifier","name":"invalidMembers"},"computed":false,"value":{"type":"CallExpression","callee":{"type":"MemberExpression","computed":false,"object":{"type":"ThisExpression"},"property":{"type":"Identifier","name":"_validateGroupMembers"}},"arguments":[{"type":"Identifier","name":"roles"},{"type":"Identifier","name":"members"}]},"kind":"init","method":false,"shorthand":false}]}]}}]},"generator":false,"expression":false,"async":false},"kind":"init","method":false,"shorthand":false},{"type":"Property","key":{"type":"Identifier","name":"validateGroupMembers"},"computed":false,"value":{"type":"FunctionExpression","id":null,"params":[],"body":{"type":"BlockStatement","body":[{"type":"VariableDeclaration","declarations":[{"type":"VariableDeclarator","id":{"type":"Identifier","name":"roles"},"init":{"type":"CallExpression","callee":{"type":"MemberExpression","computed":false,"object":{"type":"CallExpression","callee":{"type":"MemberExpression","computed":false,"object":{"type":"ThisExpression"},"property":{"type":"Identifier","name":"getParameter"}},"arguments":[{"type":"Literal","value":"sysparm_group_roles","raw":"\"sysparm_group_roles\""}]},"property":{"type":"Identifier","name":"split"}},"arguments":[{"type":"Literal","value":",","raw":"\",\""}]}}],"kind":"var"},{"type":"ExpressionStatement","expression":{"type":"AssignmentExpression","operator":"=","left":{"type":"Identifier","name":"roles"},"right":{"type":"CallExpression","callee":{"type":"MemberExpression","computed":false,"object":{"type":"Identifier","name":"roles"},"property":{"type":"Identifier","name":"filter"}},"arguments":[{"type":"FunctionExpression","id":null,"params":[{"type":"Identifier","name":"role"}],"body":{"type":"BlockStatement","body":[{"type":"ReturnStatement","argument":{"type":"UnaryExpression","operator":"!","argument":{"type":"CallExpression","callee":{"type":"MemberExpression","computed":false,"object":{"type":"Identifier","name":"gs"},"property":{"type":"Identifier","name":"nil"}},"arguments":[{"type":"CallExpression","callee":{"type":"MemberExpression","computed":false,"object":{"type":"Identifier","name":"role"},"property":{"type":"Identifier","name":"trim"}},"arguments":[]}]},"prefix":true}}]},"generator":false,"expression":false,"async":false},{"type":"ThisExpression"}]}}},{"type":"VariableDeclaration","declarations":[{"type":"VariableDeclarator","id":{"type":"Identifier","name":"members"},"init":{"type":"CallExpression","callee":{"type":"MemberExpression","computed":false,"object":{"type":"CallExpression","callee":{"type":"MemberExpression","computed":false,"object":{"type":"ThisExpression"},"property":{"type":"Identifier","name":"getParameter"}},"arguments":[{"type":"Literal","value":"sysparm_group_members","raw":"\"sysparm_group_members\""}]},"property":{"type":"Identifier","name":"split"}},"arguments":[{"type":"Literal","value":",","raw":"\",\""}]}}],"kind":"var"},{"type":"ExpressionStatement","expression":{"type":"AssignmentExpression","operator":"=","left":{"type":"Identifier","name":"members"},"right":{"type":"CallExpression","callee":{"type":"MemberExpression","computed":false,"object":{"type":"Identifier","name":"members"},"property":{"type":"Identifier","name":"filter"}},"arguments":[{"type":"FunctionExpression","id":null,"params":[{"type":"Identifier","name":"member"}],"body":{"type":"BlockStatement","body":[{"type":"ReturnStatement","argument":{"type":"UnaryExpression","operator":"!","argument":{"type":"CallExpression","callee":{"type":"MemberExpression","computed":false,"object":{"type":"Identifier","name":"gs"},"property":{"type":"Identifier","name":"nil"}},"arguments":[{"type":"CallExpression","callee":{"type":"MemberExpression","computed":false,"object":{"type":"Identifier","name":"member"},"property":{"type":"Identifier","name":"trim"}},"arguments":[]}]},"prefix":true}}]},"generator":false,"expression":false,"async":false},{"type":"ThisExpression"}]}}},{"type":"ReturnStatement","argument":{"type":"CallExpression","callee":{"type":"MemberExpression","computed":false,"object":{"type":"Identifier","name":"JSON"},"property":{"type":"Identifier","name":"stringify"}},"arguments":[{"type":"CallExpression","callee":{"type":"MemberExpression","computed":false,"object":{"type":"ThisExpression"},"property":{"type":"Identifier","name":"_validateGroupMembers"}},"arguments":[{"type":"Identifier","name":"roles"},{"type":"Identifier","name":"members"}]}]}}]},"generator":false,"expression":false,"async":false},"kind":"init","method":false,"shorthand":false},{"type":"Property","key":{"type":"Identifier","name":"_validateGroupMembers"},"computed":false,"value":{"type":"FunctionExpression","id":null,"params":[{"type":"Identifier","name":"roles"},{"type":"Identifier","name":"members"}],"body":{"type":"BlockStatement","body":[{"type":"VariableDeclaration","declarations":[{"type":"VariableDeclarator","id":{"type":"Identifier","name":"invalidMembers"},"init":{"type":"ObjectExpression","properties":[{"type":"Property","key":{"type":"Identifier","name":"sys_id"},"computed":false,"value":{"type":"ArrayExpression","elements":[]},"kind":"init","method":false,"shorthand":false},{"type":"Property","key":{"type":"Identifier","name":"display"},"computed":false,"value":{"type":"ArrayExpression","elements":[]},"kind":"init","method":false,"shorthand":false}]}}],"kind":"var"},{"type":"IfStatement","test":{"type":"BinaryExpression","operator":"==","left":{"type":"MemberExpression","computed":false,"object":{"type":"Identifier","name":"roles"},"property":{"type":"Identifier","name":"length"}},"right":{"type":"Literal","value":0,"raw":"0"}},"consequent":{"type":"BlockStatement","body":[{"type":"ReturnStatement","argument":{"type":"Identifier","name":"invalidMembers"}}]},"alternate":null},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","computed":false,"object":{"type":"Identifier","name":"members"},"property":{"type":"Identifier","name":"forEach"}},"arguments":[{"type":"FunctionExpression","id":null,"params":[{"type":"Identifier","name":"member"}],"body":{"type":"BlockStatement","body":[{"type":"IfStatement","test":{"type":"UnaryExpression","operator":"!","argument":{"type":"CallExpression","callee":{"type":"MemberExpression","computed":false,"object":{"type":"Identifier","name":"GroupUtils"},"property":{"type":"Identifier","name":"userIsOKForRole"}},"arguments":[{"type":"Identifier","name":"member"}]},"prefix":true},"consequent":{"type":"BlockStatement","body":[{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","computed":false,"object":{"type":"MemberExpression","computed":false,"object":{"type":"Identifier","name":"invalidMembers"},"property":{"type":"Identifier","name":"sys_id"}},"property":{"type":"Identifier","name":"push"}},"arguments":[{"type":"Identifier","name":"member"}]}}]},"alternate":null}]},"generator":false,"expression":false,"async":false},{"type":"ThisExpression"}]}},{"type":"VariableDeclaration","declarations":[{"type":"VariableDeclarator","id":{"type":"Identifier","name":"grpGR"},"init":{"type":"NewExpression","callee":{"type":"Identifier","name":"GlideRecord"},"arguments":[{"type":"Literal","value":"sys_user","raw":"\"sys_user\""}]}}],"kind":"var"},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","computed":false,"object":{"type":"Identifier","name":"grpGR"},"property":{"type":"Identifier","name":"addQuery"}},"arguments":[{"type":"Literal","value":"sys_id","raw":"\"sys_id\""},{"type":"MemberExpression","computed":false,"object":{"type":"Identifier","name":"invalidMembers"},"property":{"type":"Identifier","name":"sys_id"}}]}},{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","computed":false,"object":{"type":"Identifier","name":"grpGR"},"property":{"type":"Identifier","name":"query"}},"arguments":[]}},{"type":"WhileStatement","test":{"type":"CallExpression","callee":{"type":"MemberExpression","computed":false,"object":{"type":"Identifier","name":"grpGR"},"property":{"type":"Identifier","name":"next"}},"arguments":[]},"body":{"type":"BlockStatement","body":[{"type":"ExpressionStatement","expression":{"type":"CallExpression","callee":{"type":"MemberExpression","computed":false,"object":{"type":"MemberExpression","computed":false,"object":{"type":"Identifier","name":"invalidMembers"},"property":{"type":"Identifier","name":"display"}},"property":{"type":"Identifier","name":"push"}},"arguments":[{"type":"CallExpression","callee":{"type":"MemberExpression","computed":false,"object":{"type":"Identifier","name":"grpGR"},"property":{"type":"Identifier","name":"getDisplayValue"}},"arguments":[]}]}}]}},{"type":"ReturnStatement","argument":{"type":"Identifier","name":"invalidMembers"}}]},"generator":false,"expression":false,"async":false},"kind":"init","method":false,"shorthand":false},{"type":"Property","key":{"type":"Identifier","name":"groupNameExists"},"computed":false,"value":{"type":"FunctionExpression","id":null,"params":[],"body":{"type":"BlockStatement","body":[{"type":"VariableDeclaration","declarations":[{"type":"VariableDeclarator","id":{"type":"Identifier","name":"grpName"},"init":{"type":"CallExpression","callee":{"type":"MemberExpression","computed":false,"object":{"type":"ThisExpression"},"property":{"type":"Identifier","name":"getParameter"}},"arguments":[{"type":"Literal","value":"sysparm_group_name","raw":"\"sysparm_group_name\""}]}}],"kind":"var"},{"type":"VariableDeclaration","declarations":[{"type":"VariableDeclarator","id":{"type":"Identifier","name":"grpGR"},"init":{"type":"NewExpression","callee":{"type":"Identifier","name":"GlideRecord"},"arguments":[{"type":"Literal","value":"sys_user_group","raw":"\"sys_user_group\""}]}}],"kind":"var"},{"type":"IfStatement","test":{"type":"CallExpression","callee":{"type":"MemberExpression","computed":false,"object":{"type":"Identifier","name":"grpGR"},"property":{"type":"Identifier","name":"get"}},"arguments":[{"type":"Literal","value":"name","raw":"\"name\""},{"type":"Identifier","name":"grpName"}]},"consequent":{"type":"BlockStatement","body":[{"type":"ReturnStatement","argument":{"type":"Literal","value":"true","raw":"\"true\""}}]},"alternate":null},{"type":"ReturnStatement","argument":{"type":"Literal","value":"false","raw":"\"false\""}}]},"generator":false,"expression":false,"async":false},"kind":"init","method":false,"shorthand":false},{"type":"Property","key":{"type":"Identifier","name":"type"},"computed":false,"value":{"type":"Literal","value":"GroupAttributesAjax","raw":"\"GroupAttributesAjax\""},"kind":"init","method":false,"shorthand":false}]}]}}}],"sourceType":"script"}</abstract_syntax_tree>
        <added_manually>true</added_manually>
        <api_markdown>## &lt;a name="groupattributesajax"&gt;&lt;/a&gt;GroupAttributesAjax
 
### Type: `Javascript`
 
### Class: `GroupAttributesAjax`
&amp;nbsp;&amp;nbsp;_AJAX functions for GSEP Group Management_
 
&amp;nbsp;&amp;nbsp;***GroupAttributesAjax***
 
&amp;nbsp;&amp;nbsp;***Extends:*** _AbstractAjaxProcessor_
 
### Methods
&lt;br /&gt;

#### `editGroupChanges()`
&lt;br /&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;**Returns**
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;`*`
&lt;br /&gt;

#### `getAllGroupAttributes()`
&lt;br /&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;**Returns**
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;`*`
&lt;br /&gt;

#### `groupNameExists()`
&lt;br /&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;**Returns**
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;`*`
&lt;br /&gt;

#### `groupValidForUser()`
&lt;br /&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;**Returns**
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;`*`
&lt;br /&gt;

#### `userManagesGroups()`
&lt;br /&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;**Returns**
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;`*`
&lt;br /&gt;

#### `validateGroupMembers()`
&lt;br /&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;**Returns**
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;`*`
&lt;br /&gt;

#### `_validateGroupMembers(roles, members)`
&lt;br /&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;**Parameters**
 
| Name | Type | Description |
| --- | --- | --- |
| _roles_ | _*_ | _..._ | 
| _members_ | _*_ | _..._ | 
 
&lt;br /&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;**Returns**
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;`*`
</api_markdown>
        <html/>
        <markdown_document/>
        <markdown_link>groupattributesajax</markdown_link>
        <order/>
        <project_code_document_version display_value="PCDV0001007">a2c626dcdb317300d0cb5385ca961967</project_code_document_version>
        <remote>false</remote>
        <remote_json/>
        <remote_source_id/>
        <show_html>false</show_html>
        <show_markdown>false</show_markdown>
        <source_description/>
        <source_id/>
        <source_key/>
        <source_name>GroupAttributesAjax</source_name>
        <source_script_field/>
        <source_table/>
        <source_text>/**&#13;
 * AJAX functions for GSEP Group Management&#13;
 */&#13;
var GroupAttributesAjax = Class.create();&#13;
GroupAttributesAjax.prototype = Object.extendsObject(AbstractAjaxProcessor, {&#13;
    getAllGroupAttributes: function() {&#13;
        var groupDetails = {&#13;
            name: "",&#13;
            manager: null,&#13;
            alternate_managers: [],&#13;
            email: "",&#13;
            description: "",&#13;
            u_primary_use: null,&#13;
            parent: null,&#13;
            business_service: null,&#13;
            service_offering: null,&#13;
            vendor: null,&#13;
            active: "",&#13;
            members: [],&#13;
            roles: [],&#13;
            types: [],&#13;
            countries: []&#13;
        };&#13;
        var utils = new GroupUtils();&#13;
        var grpID = this.getParameter("sysparm_group_id");&#13;
        var grpGR = new GlideRecord("sys_user_group");&#13;
        if (grpGR.get(grpID)) {&#13;
            groupDetails.name = grpGR.name.toString();&#13;
            groupDetails.email = grpGR.email.toString();&#13;
            groupDetails.description = grpGR.description.toString();&#13;
            groupDetails.manager = !grpGR.manager.nil()&#13;
                ? { sys_id: grpGR.manager.toString(), display: grpGR.manager.getDisplayValue() }&#13;
                : null;&#13;
            groupDetails.u_primary_use = !grpGR.u_primary_use.nil()&#13;
                ? { sys_id: grpGR.u_primary_use.toString(), display: grpGR.u_primary_use.getDisplayValue() }&#13;
                : null;&#13;
            groupDetails.parent = !grpGR.parent.nil()&#13;
                ? { sys_id: grpGR.parent.toString(), display: grpGR.parent.getDisplayValue() }&#13;
                : null;&#13;
            groupDetails.business_service = !grpGR.u_business_service.nil()&#13;
                ? { sys_id: grpGR.u_business_service.toString(), display: grpGR.u_business_service.getDisplayValue() }&#13;
                : null;&#13;
            groupDetails.service_offering = !grpGR.u_service_offering.nil()&#13;
                ? { sys_id: grpGR.u_service_offering.toString(), display: grpGR.u_service_offering.getDisplayValue() }&#13;
                : null;&#13;
            groupDetails.vendor = !grpGR.u_vendor.nil()&#13;
                ? { sys_id: grpGR.u_vendor.toString(), display: grpGR.u_vendor.getDisplayValue() }&#13;
                : null;&#13;
            groupDetails.active = grpGR.active ? "Yes" : "No";&#13;
            groupDetails.members = utils.getGroupMembers(grpID);&#13;
            groupDetails.roles = utils.getGroupRoles(grpID);&#13;
            groupDetails.countries = utils.getGroupCountries(grpID);&#13;
            groupDetails.types = utils.getGroupTypes(grpGR.type.toString());&#13;
            groupDetails.alternate_managers = utils.getUserDetails(grpGR.u_alternate_managers.toString());&#13;
        }&#13;
        return JSON.stringify(groupDetails);&#13;
    },&#13;
&#13;
    userManagesGroups: function() {&#13;
        var managerID = this.getParameter("sysparm_requested_by");&#13;
        var managesGroups = new GroupUtils().userManagesGroups(managerID);&#13;
        gs.info("Manages groups=" + managesGroups + " id=" + managerID);&#13;
        return managesGroups ? "true" : "false";&#13;
    },&#13;
&#13;
    groupValidForUser: function() {&#13;
        var groupID = this.getParameter("sysparm_group_id");&#13;
        var managerID = this.getParameter("sysparm_requested_by");&#13;
        var requestType = this.getParameter("sysparm_request_type");&#13;
&#13;
        var utils = new GroupUtils();&#13;
        var groups;&#13;
&#13;
        // Removing a user from a group means they must be in the group&#13;
        // No query needed here since removing from inactive groups is OK&#13;
        if (requestType == "remove_member") {&#13;
            groups = utils.getUserGroups(managerID);&#13;
            var userIsInGroup = groups.some(function(group) {&#13;
                return groupID == group.sys_id;&#13;
            }, this);&#13;
            return userIsInGroup ? "true" : "false";&#13;
        }&#13;
&#13;
        // Adding a user to a group means they cannot already be in that group&#13;
        // If they aren't in the group then still need query to check group is active&#13;
        if (requestType == "add_member" &amp;&amp; utils.userIsInGroup(managerID, groupID)) {&#13;
            return "false";&#13;
        }&#13;
&#13;
        var grpGR = new GlideRecord("sys_user_group");&#13;
        grpGR.addQuery("sys_id", groupID);&#13;
        if (requestType == "activate") {&#13;
            grpGR.addQuery("active", false);&#13;
        } else {&#13;
            grpGR.addActiveQuery();&#13;
        }&#13;
        if (requestType != "add_member") {&#13;
            grpGR.addQuery("manager", managerID).addOrCondition("u_alternate_managers", "CONTAINS", managerID);&#13;
        }&#13;
        grpGR.query();&#13;
        return grpGR.hasNext() ? "true" : "false";&#13;
    },&#13;
&#13;
    editGroupChanges: function() {&#13;
        var roles = this.getParameter("sysparm_group_roles").split(",");&#13;
        roles = roles.filter(function(role) {&#13;
            return !gs.nil(role.trim());&#13;
        }, this);&#13;
        var members = this.getParameter("sysparm_group_members").split(",");&#13;
        members = members.filter(function(member) {&#13;
            return !gs.nil(member.trim());&#13;
        }, this);&#13;
        return JSON.stringify({&#13;
            nameExists: this.groupNameExists(),&#13;
            invalidMembers: this._validateGroupMembers(roles, members)&#13;
        });&#13;
    },&#13;
&#13;
    validateGroupMembers: function() {&#13;
        var roles = this.getParameter("sysparm_group_roles").split(",");&#13;
        roles = roles.filter(function(role) {&#13;
            return !gs.nil(role.trim());&#13;
        }, this);&#13;
        var members = this.getParameter("sysparm_group_members").split(",");&#13;
        members = members.filter(function(member) {&#13;
            return !gs.nil(member.trim());&#13;
        }, this);&#13;
        return JSON.stringify(this._validateGroupMembers(roles, members));&#13;
    },&#13;
&#13;
    _validateGroupMembers: function(roles, members) {&#13;
        var invalidMembers = { sys_id: [], display: [] };&#13;
        if (roles.length == 0) {&#13;
            return invalidMembers;&#13;
        }&#13;
        members.forEach(function(member) {&#13;
            if (!GroupUtils.userIsOKForRole(member)) {&#13;
                invalidMembers.sys_id.push(member);&#13;
            }&#13;
        }, this);&#13;
&#13;
        // Get the names&#13;
        var grpGR = new GlideRecord("sys_user");&#13;
        grpGR.addQuery("sys_id", invalidMembers.sys_id);&#13;
        grpGR.query();&#13;
        while (grpGR.next()) {&#13;
            invalidMembers.display.push(grpGR.getDisplayValue());&#13;
        }&#13;
&#13;
        return invalidMembers;&#13;
    },&#13;
&#13;
    groupNameExists: function() {&#13;
        var grpName = this.getParameter("sysparm_group_name");&#13;
        var grpGR = new GlideRecord("sys_user_group");&#13;
        if (grpGR.get("name", grpName)) {&#13;
            return "true";&#13;
        }&#13;
        return "false";&#13;
    },&#13;
&#13;
    type: "GroupAttributesAjax"&#13;
});&#13;
</source_text>
        <source_type>Javascript</source_type>
        <sys_created_by>admin</sys_created_by>
        <sys_created_on>2019-05-30 00:28:49</sys_created_on>
        <sys_id>bad09354dbb17300d0cb5385ca96196b</sys_id>
        <sys_mod_count>4</sys_mod_count>
        <sys_updated_by>admin</sys_updated_by>
        <sys_updated_on>2019-06-25 18:56:20</sys_updated_on>
    </x_58056_md_docs_markdown_source>
</record_update>
]]></payload>
        <sys_class_name>sys_metadata_link</sys_class_name>
        <sys_created_by>admin</sys_created_by>
        <sys_created_on>2022-12-05 21:35:42</sys_created_on>
        <sys_id>c3e511562fe7991448dca1fef699b6d8</sys_id>
        <sys_mod_count>0</sys_mod_count>
        <sys_name>GroupAttributesAjax</sys_name>
        <sys_package display_value="Markdown Documents" source="x_58056_md_docs">7ac0b5344f212300ecf18c318110c745</sys_package>
        <sys_policy/>
        <sys_scope display_value="Markdown Documents">7ac0b5344f212300ecf18c318110c745</sys_scope>
        <sys_update_name>sys_metadata_link_c3e511562fe7991448dca1fef699b6d8</sys_update_name>
        <sys_updated_by>admin</sys_updated_by>
        <sys_updated_on>2022-12-05 21:35:42</sys_updated_on>
        <tablename>x_58056_md_docs_markdown_source</tablename>
    </sys_metadata_link>
</record_update>
